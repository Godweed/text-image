!function(){function t(t){for(var e in t)this.style[e]=t[e];return this._style="font: "+this.style.size+"pt "+this.style.font+";",this._style+="line-height: "+this.style.size+"pt;",this._style+="text-align: "+this.style.align+";",this._style+="color: "+this.style.color+";",this._style+=r,this}function e(){return o.toDataURL()}function i(t,e){n.call(this,t);var i=new Image;return e&&(i.onload=e),i.src=o.toDataURL(),i}function n(t){t=t.trim(),s.innerHTML=t,s.setAttribute("style",this._style),a.clearRect(0,0,o.width,o.height),o.width=s.offsetWidth,o.height=s.offsetHeight,a.font=s.style.font,a.textAlign=s.style.textAlign,a.fillStyle=s.style.color;var e=0;switch(a.textAlign){case"center":e=o.width/2;break;case"right":e=o.width}var i=t.split("\n");if(1==i.length)a.fillText(t,e,o.height-3);else{var n=s.offsetHeight/i.length;i.forEach(function(t,i){a.fillText(t,e,n*(i+1)-3)})}}function l(){document.body.appendChild(s)}var s=document.createElement("pre"),o=document.createElement("canvas"),a=o.getContext("2d"),h={font:"Sans-serif",align:"left",color:"#000000",size:16},r=";padding: 0; display: inline-block; position: fixed; top: 100%;";window.addEventListener?window.addEventListener("load",l,!1):window.attachEvent("onload",l,!1),window.TextImage=function(n){var l={style:h,setStyle:t,toDataURL:e,toImage:i};return l.setStyle(n),l}}();