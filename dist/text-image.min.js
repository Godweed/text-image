!function(){function t(t){for(var e in t)this.style[e]=t[e];return this._style="font: "+this.style.size+"pt "+this.style.font+";",this._style+="line-height: "+this.style.size+"pt;",this._style+="text-align: "+this.style.align+";",this._style+="color: "+this.style.color+";",this._style+="background-color: "+this.style.background+";",this._style+=a,this}function e(){return o.toDataURL()}function i(t,e){s.call(this,t);var i=new Image;return e&&(i.onload=e),i.src=o.toDataURL(),i}function s(t){t=String(t).trim(),n.innerText=t,n.setAttribute("style",this._style),r.clearRect(0,0,o.width,o.height),o.width=n.offsetWidth+this.style.stroke,o.height=n.offsetHeight+2*this.style.stroke,r.fillStyle=this.style.background,r.beginPath(),r.fillRect(0,0,o.width,o.height),r.fill();var e=t.split("\n"),i=this.style.stroke/2,s=Math.floor(o.height/e.length);switch(r.font=this.style.size+"pt "+this.style.font,r.textAlign=this.style.align,r.lineWidth=i,r.strokeStyle=this.style.strokeColor,r.fillStyle=this.style.color,r.textAlign){case"center":i=o.width/2;break;case"right":i=o.width-i}e.forEach(function(t,e){i&&r.strokeText(t,i,s*(e+1)-3),r.fillText(t,i,s*(e+1)-3)})}function l(){document.body.appendChild(n)}var n=document.createElement("pre"),o=document.createElement("canvas"),r=o.getContext("2d"),h={font:"Sans-serif",align:"left",color:"#000000",size:16,background:"rgba(0, 0, 0, 0)",stroke:0,strokeColor:"#FFFFFF"},a=";padding: 0; display: inline-block; position: fixed; top: 100%;";window.addEventListener?window.addEventListener("load",l,!1):window.attachEvent("onload",l,!1),window.TextImage=function(s){var l={style:{},setStyle:t,toDataURL:e,toImage:i};for(var n in h)l.style[n]=h[n];return l.setStyle(s),l}}();