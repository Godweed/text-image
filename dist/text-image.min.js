!function(){function t(t){for(var e in t)this.style[e]=t[e];return this._style="font: "+this.style.size+"pt "+this.style.font+";",this._style+="line-height: 1;",this._style+="text-align: "+this.style.align+";",this._style+="color: "+this.style.color+";",this._style+="background-color: "+this.style.background+";",this._style+=a,this}function e(){return o.toDataURL()}function i(t,e){s.call(this,t);var i=new Image;return e&&(i.onload=e),i.src=o.toDataURL(),i}function s(t){t=String(t).trim(),l.innerText=t,l.setAttribute("style",this._style),r.clearRect(0,0,o.width,o.height);var e=t.split("\n"),i=Math.floor(this.style.stroke/2),s=l.offsetHeight/e.length,n=.2*s;switch(o.width=l.offsetWidth+i,o.height=l.offsetHeight,r.fillStyle=this.style.background,r.beginPath(),r.fillRect(0,0,o.width,o.height),r.fill(),r.font=this.style.size+"pt "+this.style.font,r.textAlign=this.style.align,r.lineWidth=i,r.strokeStyle=this.style.strokeColor,r.fillStyle=this.style.color,r.textAlign){case"center":i=o.width/2;break;case"right":i=o.width-i}e.forEach(function(t,e){this.style.stroke&&r.strokeText(t,i,s*(e+1)-n),r.fillText(t,i,s*(e+1)-n)}.bind(this))}function n(){document.body.appendChild(l)}var l=document.createElement("pre"),o=document.createElement("canvas"),r=o.getContext("2d"),h={font:"Sans-serif",align:"left",color:"#000000",size:16,background:"rgba(0, 0, 0, 0)",stroke:0,strokeColor:"#FFFFFF"},a=";padding: 0; display: block; position: fixed; top: 0;overflow: hidden";window.addEventListener?window.addEventListener("load",n,!1):window.attachEvent("onload",n,!1),window.TextImage=function(s){var n={style:{},setStyle:t,toDataURL:e,toImage:i};for(var l in h)n.style[l]=h[l];return n.setStyle(s),n}}();